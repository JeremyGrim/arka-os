**lots 1 et 2** 

---

# ‚úÖ LOT 1 ‚Äî Router FLOW + CI (intent ‚Üí flow_ref ‚Üí export)

**T√©l√©chargement :**

* [LOT1_ROUTER_CI.zip](sandbox:/mnt/data/LOT1_ROUTER_CI.zip)

**Contenu (arborescence relative au repo)**

```
ARKA_OS/
  ARKA_FLOW/
    router/
      routing.yaml          # source unique de routage (intent ‚Üí flow_ref)
ci/
  ci_resolve_all.py         # test: v√©rifie que chaque intent router pointe un export r√©el
```

**Ce que fait `routing.yaml`**

* Cr√©e 1 r√®gle **`by: intent`** par intent trouv√© dans ton **MANIFEST FLOW** (16 intents familles AUDIT/DELIVERY/DOC/OPS/MKT/PEOPLE).
* Ajoute une entr√©e utilitaire `DISCOVER:WORKFLOWS` ‚Üí `ARKFLOW-00-MANIFEST:workflows_catalog`.
* D√©clare des **defaults** compatibles ARKORE20-MESSAGING (handshake/status).

**Test d‚Äôacceptation (local, non intrusif)**
Depuis la racine du repo :

```bash
python ci/ci_resolve_all.py .
```

* V√©rifie chaque r√®gle du router :

  * `flow_ref` pr√©sent et valide (`ID:EXPORT`),
  * `ID` existe dans `ARKFLOW00-INDEX.yaml`,
  * `EXPORT` est list√© dans les `exports` index√©s.
* Sortie **OK** ‚áí lot 1 valid√©.

---

# ‚úÖ LOT 2 ‚Äî Nomenclature + Wake‚Äëup align√©s + CI

**T√©l√©chargement :**

* [LOT2_NOMENCLATURE_WAKEUP_CI.zip](sandbox:/mnt/data/LOT2_NOMENCLATURE_WAKEUP_CI.zip)

**Contenu**

```
ARKA_OS/
  ARKA_CORE/
    bricks/
      ARKA_NOMENCLATURE01.yaml    # nomenclature canonique (terms)
  wakeup-intents.matrix.yaml      # wake-up r√©align√© sur la nomenclature
ci/
  ci_nomenclature_lint.py         # lint terms: unicit√©, owner, related_workflows existants
  ci_wakeup_diff.py               # delta nomenclature ‚Üî wakeup (doit √™tre vide)
```

**Ce que contient la nomenclature**

* **1 entr√©e par intent** du MANIFEST (16/16), avec :
  `id` (= intent), `label`, `aliases`, `domain`, `tags`, `owner`, `related_workflows` (‚Üí `ID:EXPORT`), `visibility`, `change_policy`.
* Les **owners** sont pos√©s par **heuristique s√ªre** (ex : *Archiviste* pour RGPD/Conformit√©/ADR/Core ; *AGP* pour Delivery/Marketing/People).
* **Aucune nouvelle contrainte** : c‚Äôest une *source de v√©rit√© d√©clarative*, lisible humaine, exploitable par outil.

**Wake‚Äëup r√©align√©**

* Fichier √† la racine `ARKA_OS/wakeup-intents.matrix.yaml` listant :

  * `intents: [ ... ]`  (les 16 canoniques),
  * `aliases: { INTENT: [ alias1, alias2, ... ] }`.

**Tests d‚Äôacceptation**
Depuis la racine du repo :

```bash
python ci/ci_nomenclature_lint.py .
python ci/ci_wakeup_diff.py .
```

* **Lint nomenclature** : ids uniques, owners pr√©sents, `related_workflows` pointant vers des exports **r√©els**.
* **Diff wake‚Äëup** : aucun intent manquant c√¥t√© wake‚Äëup.

---

## üì¶ Bundle combin√© (lots 1 & 2 ensemble)

Si tu pr√©f√®res un seul artefact :

* [LOTS_1_2_FULL_DELIVERY.zip](sandbox:/mnt/data/LOTS_1_2_FULL_DELIVERY.zip)
  Contient l‚Äôint√©gralit√© des deux lots, m√™me arborescence, pr√™t √† fusionner.

---

## üîí Points de s√ªret√© (pas de r√©gression)

* **Aucun remplacement agressif** : ces lots **ajoutent ou remplacent uniquement** les fichiers explicitement list√©s (router, nomenclature, wake‚Äëup, ci/*).
* Les scripts CI sont **read‚Äëonly** : ils lisent MANIFEST/INDEX/Router/Nomenclature/Wake‚Äëup, ne modifient rien.
* La logique respecte le principe valid√© : **pas de r√¥le fig√©** dans le routing, seules les **gates** sont dynamiques (AGP/Archiviste) dans les flows existants.

---

## üî≠ Suite (pour m√©moire, hors de ce lot)

* **Lot 3‚Äì4** : application des correctifs restants (purge META, hi√©rarchie unique, front‚Äëmatter `arkaref` sur docs cl√©s, etc.).
* **Lot 5** : refonte Agents (experts centralis√©s + onboarding client unifi√©), selon la trajectoire document√©e. 
* **GPS** : je le livrerai en tant que **ARKA_ROUTING** (nom pro), en bout de cha√Æne (lookup/catalog/resolve multi‚Äëfacettes), une fois les fondations (lots 1‚Äì4) int√©gr√©es.

