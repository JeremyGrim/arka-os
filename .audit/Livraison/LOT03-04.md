**lots 3 et 4** (gouvernance/hi√©rarchie & META, puis docs `arkaref`) en **zips pr√™ts √† poser** dans ton repo, avec **outils d‚Äôapplication** + **scripts CI** pour valider.

> NB ‚Äî La refonte Agents restera align√©e avec la piste **experts + onboarding client unifi√©** (cf. *R√©organisation multiprojet ‚Äî Pr√©paration*), et j‚Äôint√©grerai ensuite le **GPS** sous un nom pro (**ARKA_ROUTING**) en fin de cha√Æne. 

---

## üì¶ T√©l√©chargements (lots 3 & 4)

* **Lot 3 ‚Äî Gouvernance / Hi√©rarchie & purge META**
  [LOT3_GOV_HIER_META.zip](sandbox:/mnt/data/LOT3_GOV_HIER_META.zip)

* **Lot 4 ‚Äî Liaison Docs ‚Üî Nomenclature (front‚Äëmatter `arkaref`) + CI**
  [LOT4_DOCS_ARKAREF.zip](sandbox:/mnt/data/LOT4_DOCS_ARKAREF.zip)

* **Bundle combin√© (ce qui existe sur disque)** :
  [LOTS_COMBINED_DELIVERY.zip](sandbox:/mnt/data/LOTS_COMBINED_DELIVERY.zip)
  *(contient LOT3 & LOT4 ‚Äî les LOT1/LOT2 d√©j√† livr√©s pr√©c√©demment ne sont pas recombin√©s ici pour √©viter tout risque de divergence ; tu as d√©j√† leurs zips d√©di√©s.)*

---

## ‚úÖ LOT 3 ‚Äî D√©tail & mode d‚Äôemploi

**Objectif.**

* **Unifier la hi√©rarchie** (un seul `ARKORE01-HIERARCHY.yaml` dans `ARKA_CORE`) et **d√©clarer** les points d‚Äôentr√©e **flow** & **registry**.
* **Purger** `ARKA_OS/ARKA_META` de toute brique active (YAML avec `id`) en **d√©pla√ßant** automatiquement vers la bonne cible.
* **CI** pour garantir : *hi√©rarchie unique* et *META sans gouvernance*.

**Contenu du zip :**

```
ARKA_OS.ARKA_CORE.bricks.ARKORE01-HIERARCHY.patch.yaml  # patch d√©claratif (flow + registry)
hierarchy_merge.py                                      # applique le patch (idempotent)
meta_moves_plan.json                                    # plan de d√©placement META ‚Üí CORE/FLOW
meta_purge.py                                           # ex√©cute les d√©placements (idempotent)
ci_hierarchy_singleton.py                               # CI : un seul ARKORE01-HIERARCHY
ci_meta_scan.py                                         # CI : META sans YAML 'id'
```

**Application (depuis la racine du repo) :**

```bash
# 1) Appliquer le patch (ajoute/merge flow+registry dans l'unique ARKORE01-HIERARCHY)
python hierarchy_merge.py .

# 2) Purger META (d√©place chaque YAML avec 'id' vers la cible propos√©e)
python meta_purge.py .

# 3) CI de s√ªret√©
python ci_hierarchy_singleton.py .
python ci_meta_scan.py .
```

**Notes de s√ªret√© :**

* `hierarchy_merge.py` cr√©e un **.bak** avant √©criture.
* `meta_purge.py` pr√©serve l‚Äôexistant (si le fichier destination existe, suffixe `.new` ‚Äî aucune perte).

---

## ‚úÖ LOT 4 ‚Äî D√©tail & mode d‚Äôemploi

**Objectif.**

* **Relier la documentation** au syst√®me via le front‚Äëmatter `arkaref`, pour que chaque doc soit **trouvable** par **sujet (nomenclature)** et **workflow**.
* Fournir un **mapping initial** (candidats d√©tect√©s dans *ARKA_LABS.zip*) et un **outil d‚Äôinjection**.
* **CI** pour valider que les r√©f√©rences pointent vers des √©l√©ments **r√©els** (nomenclature/flow).

**Contenu du zip :**

```
docs_arkaref_map.yaml        # propositions de mapping Intent -> [docs .md candidates]
apply_arkaref.py             # injecte/actualise le front-matter 'arkaref' en t√™te des docs
ci_docs_refcheck.py          # CI : chaque 'arkaref' pointe vers nomenclature/flows existants
```

**Application :**

```bash
# 1) (Optionnel) Ouvre/√©dite docs_arkaref_map.yaml pour confirmer/ajuster les docs cibl√©es.
# 2) Injecter le front-matter 'arkaref' (idempotent : remplace/ajoute proprement)
python apply_arkaref.py .

# 3) CI de validation des r√©f√©rences
python ci_docs_refcheck.py .
```

**Exemple de front‚Äëmatter ajout√© :**

```yaml
---
arkaref:
  nomenclature: "AUDIT:RGPD"
  workflow: null      # tu peux le renseigner ensuite (ID:EXPORT)
  owner: null         # idem (owner du domaine)
---
```

---

## üß© Continuit√© avec LOT 1 & LOT 2

* **LOT 1** (router) : op√©rationnel pour r√©soudre **intent ‚Üí flow_ref ‚Üí export** pour les 16 intents du MANIFEST.
* **LOT 2** (nomenclature + wake‚Äëup align√©s) : chaque intent est **canonis√©** et **atteignable** via wake‚Äëup ; CI de lint/diff fournie.

*(Tu conserves les zips LOT1/LOT2 pr√©c√©dents. Si tu veux, je peux reg√©n√©rer un bundle total √† la fin de LOT4, mais je pr√©f√®re livrer **lot par lot** pour √©viter tout √©crasement non souhait√©.)*

---

## üî≠ Suite (apr√®s int√©gration de LOT3 & LOT4)

* **LOT 5 ‚Äî Refonte Agents** (experts centralis√©s + onboarding client unifi√©, index agents), tel que cadr√© dans *R√©organisation multiprojet ‚Äî Pr√©paration*. 
* **GPS final (nom pro : `ARKA_ROUTING`)** : service l√©ger **lookup/catalog/resolve** multi‚Äëfacettes (nomenclature, flow, doc, agent, capability‚Ä¶), expos√© en CLI/HTTP interne, fond√© sur les assets normalis√©s par les lots pr√©c√©dents.

---

